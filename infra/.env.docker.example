# MeatyMusic Docker Environment Configuration
# Copy this file to .env.docker and update with your actual values
# Usage: docker-compose --env-file .env.docker up

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL database settings
POSTGRES_DB=meaty_music_dev
POSTGRES_USER=mm_user
POSTGRES_PASSWORD=secure_dev_pw
POSTGRES_PORT=5432

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_PORT=6379

# =============================================================================
# SERVICE PORTS
# =============================================================================
# API service (FastAPI)
API_PORT=8000

# Web service (Next.js)
WEB_PORT=3000

# =============================================================================
# CLERK AUTHENTICATION
# =============================================================================
# Get these from your Clerk dashboard: https://dashboard.clerk.com
# REQUIRED: These must be set for the app to work
CLERK_JWT_VERIFICATION_KEY=your-jwt-verification-key-here
CLERK_WEBHOOK_SECRET=whsec_your_webhook_secret_here
CLERK_SECRET_KEY=sk_test_your_secret_key_here
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your_publishable_key_here

# =============================================================================
# API CONFIGURATION
# =============================================================================
# Public API URL (use http://localhost:8000 for local dev, or your domain for prod)
NEXT_PUBLIC_API_BASE_URL=http://localhost:8000

# =============================================================================
# ENVIRONMENT
# =============================================================================
# Options: development, staging, production
ENVIRONMENT=development
NODE_ENV=production

# =============================================================================
# OBSERVABILITY CONFIGURATION
# =============================================================================
# Enable or disable distributed tracing
OBS_TRACING_ENABLED=true

# Enable or disable custom telemetry endpoints
OBS_TELEMETRY_ENABLED=true

# Emit logs in JSON format
OBS_LOG_JSON_FORMAT=true

# Logging verbosity: DEBUG, INFO, WARNING, ERROR, CRITICAL
OBS_LOG_LEVEL=INFO

# OpenTelemetry exporter: console, otlp, or memory (testing)
OBS_OTEL_EXPORTER_TYPE=console

# Required when using the OTLP exporter (e.g., Grafana, Jaeger)
# OBS_OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Music Rendering Connectors
NEXT_PUBLIC_RENDER_SUNO_ENABLED=false
NEXT_PUBLIC_RENDER_UDIO_ENABLED=false

# Workflow Features
NEXT_PUBLIC_AUTOFIX_ENABLED=true
NEXT_PUBLIC_PERSONA_ENABLED=true

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================
# Dev Auth Bypass (for MCP servers, AI agents, and Playwright tests)
# WARNING: Never enable in production!
# See docs/development/DEV_AUTH_BYPASS.md for details
DEV_AUTH_BYPASS_ENABLED=false
# Must be 32+ characters if enabled
DEV_AUTH_BYPASS_SECRET=
# Test user ID to use when bypass is enabled
DEV_AUTH_BYPASS_USER_ID=user_test123

# =============================================================================
# MONITORING STACK (Optional)
# =============================================================================
# If you want to connect to the monitoring stack (monitoring/docker-compose.yml),
# uncomment these and ensure the monitoring stack is running:
# OBS_OTEL_EXPORTER_TYPE=otlp
# OBS_OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# =============================================================================
# NOTES
# =============================================================================
# 1. Copy this file to .env.docker: cp .env.docker.example .env.docker
# 2. Update all CLERK_* and NEXT_PUBLIC_CLERK_* values with your Clerk credentials
# 3. Set strong passwords for POSTGRES_PASSWORD
# 4. Start the stack: docker-compose --env-file .env.docker up -d
# 5. Run migrations: docker-compose --env-file .env.docker up migrations
# 6. Access the services:
#    - Web: http://localhost:3000
#    - API: http://localhost:8000
#    - API Docs: http://localhost:8000/docs
#    - PostgreSQL: localhost:5432
#    - Redis: localhost:6379
