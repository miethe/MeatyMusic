import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Accessibility" />

# Accessibility Guidelines

Accessibility is a core principle of the MeatyPrompts design system. Every component is built to meet or exceed WCAG 2.1 AA standards, ensuring our interfaces are usable by everyone.

## Our Commitment

We believe great design is inclusive design. Our accessibility approach ensures that:

- **Everyone can use our products** regardless of ability or assistive technology
- **Compliance is built-in** rather than retrofitted
- **Accessibility improves usability** for all users
- **Standards exceed legal requirements** with AAA features where possible

## Accessibility Standards

### WCAG 2.1 AA Compliance
All components meet Web Content Accessibility Guidelines Level AA, including:
- **Color contrast ratios ≥ 4.5:1** for normal text
- **Color contrast ratios ≥ 3:1** for large text and UI components
- **Keyboard accessibility** for all interactive elements
- **Screen reader support** with proper ARIA attributes

### WAI-ARIA Implementation
Components follow Web Accessibility Initiative patterns for:
- **Semantic HTML** as the foundation
- **ARIA attributes** for enhanced accessibility
- **Focus management** in complex interactions
- **State announcements** for dynamic content

### Section 508 and EN 301 549
Our components comply with:
- U.S. Federal accessibility requirements (Section 508)
- European accessibility standard (EN 301 549)
- Additional international accessibility standards

## Core Accessibility Features

### Keyboard Navigation
Every interactive element supports keyboard operation:

```jsx
// Example: Fully keyboard accessible button
<Button
  onKeyDown={(e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      handleAction();
    }
  }}
>
  Keyboard Accessible
</Button>
```

**Key Features:**
- Tab order follows visual layout
- Enter and Space activate buttons
- Arrow keys navigate menus and lists
- Escape closes modals and dropdowns

### Screen Reader Support
All components provide appropriate information to assistive technology:

```jsx
// Example: Accessible form field
<FormField>
  <FormLabel htmlFor="email">Email Address</FormLabel>
  <Input
    id="email"
    type="email"
    aria-describedby="email-help"
    required
    aria-required="true"
  />
  <FormDescription id="email-help">
    We'll never share your email address
  </FormDescription>
  <FormMessage role="alert">
    Please enter a valid email address
  </FormMessage>
</FormField>
```

### Focus Management
Clear, visible focus indicators help users understand their current location:

- **Focus indicators** meet 3:1 contrast ratio requirement
- **Focus is never hidden** by other interface elements
- **Focus restoration** after modal or menu interactions
- **Skip links** for efficient navigation

### Color and Contrast
We ensure information is perceivable across all themes:

- **Never rely on color alone** to convey information
- **High contrast themes** available for enhanced visibility
- **Pattern and shape** used alongside color coding
- **Text alternatives** for color-coded information

## Component-Specific Guidelines

### Buttons
```jsx
// ✅ Good: Descriptive button text
<Button>Save Changes</Button>
<Button>Delete Item</Button>

// ❌ Bad: Generic or unclear text
<Button>Click Here</Button>
<Button>OK</Button>
```

### Links
```jsx
// ✅ Good: Descriptive link text
<Link href="/documentation">View Documentation</Link>

// ❌ Bad: Generic link text
<Link href="/documentation">Click Here</Link>
```

### Forms
```jsx
// ✅ Good: Properly labeled and described
<FormField>
  <FormLabel htmlFor="password">Password</FormLabel>
  <Input
    id="password"
    type="password"
    aria-describedby="password-help"
    required
  />
  <FormDescription id="password-help">
    Must be at least 8 characters with uppercase, lowercase, and numbers
  </FormDescription>
</FormField>
```

### Modal Dialogs
```jsx
// ✅ Good: Proper modal structure
<Dialog>
  <DialogContent aria-labelledby="dialog-title" aria-describedby="dialog-desc">
    <DialogHeader>
      <DialogTitle id="dialog-title">Confirm Delete</DialogTitle>
    </DialogHeader>
    <DialogDescription id="dialog-desc">
      This action cannot be undone. The item will be permanently deleted.
    </DialogDescription>
    <DialogFooter>
      <Button variant="outline" onClick={onCancel}>Cancel</Button>
      <Button variant="destructive" onClick={onConfirm}>Delete</Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

## Testing for Accessibility

### Automated Testing
Every component includes automated accessibility tests:

```javascript
import { axe, toHaveNoViolations } from 'jest-axe';

test('Button has no accessibility violations', async () => {
  const { container } = render(<Button>Test Button</Button>);
  const results = await axe(container);
  expect(results).toHaveNoViolations();
});
```

### Manual Testing
We recommend regular manual testing with:

- **Keyboard-only navigation** through entire interfaces
- **Screen reader testing** with NVDA (Windows) or VoiceOver (Mac)
- **Color contrast verification** with automated tools
- **Zoom testing** up to 200% magnification

### User Testing
Include users with disabilities in your research and testing:

- **Recruit diverse participants** with various abilities and assistive technologies
- **Test real-world scenarios** rather than isolated components
- **Gather feedback** on actual usability, not just compliance
- **Iterate based on insights** from accessibility-focused sessions

## Common Patterns

### Error Messages
```jsx
// ✅ Good: Clear, helpful error messaging
<FormMessage role="alert" aria-live="polite">
  Password must contain at least 8 characters, one uppercase letter,
  one lowercase letter, and one number
</FormMessage>

// ❌ Bad: Generic, unhelpful errors
<FormMessage>Invalid input</FormMessage>
```

### Loading States
```jsx
// ✅ Good: Announced loading state
<div role="status" aria-live="polite" aria-label="Loading content">
  <Skeleton className="h-4 w-full" />
  <span className="sr-only">Loading content, please wait...</span>
</div>
```

### Data Tables
```jsx
// ✅ Good: Accessible table structure
<table role="table">
  <caption>User account information</caption>
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Email</th>
      <th scope="col">Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Jane Doe</td>
      <td>jane@example.com</td>
      <td>Active</td>
    </tr>
  </tbody>
</table>
```

## Quick Reference

### ARIA Landmarks
```jsx
<main>          {/* Main content area */}
<nav>           {/* Navigation sections */}
<aside>         {/* Sidebar content */}
<footer>        {/* Footer information */}
<section>       {/* Distinct content sections */}
<article>       {/* Self-contained content */}
```

### ARIA Live Regions
```jsx
<div aria-live="polite">    {/* Announces when convenient */}
<div aria-live="assertive"> {/* Announces immediately */}
<div role="alert">          {/* Important messages */}
<div role="status">         {/* Status updates */}
```

### Focus Management
```jsx
// Focus trap in modals
const firstFocusableElement = modal.querySelector('button, input, select, textarea, [tabindex]:not([tabindex="-1"])');
const lastFocusableElement = modal.querySelectorAll('button, input, select, textarea, [tabindex]:not([tabindex="-1"])');

// Restore focus after modal closes
previousFocusElement.focus();
```

## Resources and Tools

### Testing Tools
- **axe DevTools** - Browser extension for accessibility auditing
- **Lighthouse** - Built-in Chrome accessibility audit
- **WAVE** - Web accessibility evaluation tool
- **Colour Contrast Analyser** - Color contrast testing

### Screen Readers
- **NVDA** - Free Windows screen reader
- **VoiceOver** - Built-in Mac screen reader
- **JAWS** - Popular Windows screen reader
- **TalkBack** - Android screen reader

### Guidelines and Standards
- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [WAI-ARIA Authoring Practices](https://www.w3.org/WAI/ARIA/apg/)
- [WebAIM Resources](https://webaim.org/)
- [A11y Project Checklist](https://www.a11yproject.com/checklist/)

## Get Help

### Design System Support
- [Accessibility Checklist](https://github.com/miethe/meatyprompts/blob/main/docs/design/accessibility/checklist.md) - Complete WCAG compliance checklist
- [Component Documentation](/?path=/docs/components-button--docs) - Accessibility notes for each component
- [Contributing Guide](https://github.com/miethe/meatyprompts/blob/main/docs/design/contributing.md) - How to contribute accessible components

### Community Resources
- **WebAIM Community** - Accessibility discussion forums
- **A11y Slack** - Real-time accessibility help and discussion
- **Accessibility Developer Guide** - Comprehensive accessibility resources

Remember: Accessibility is not a checklist to complete, but an ongoing commitment to inclusive design. When in doubt, test with real users and prioritize their experience over technical compliance alone.
